!function(t){var e={};function i(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){const a=i(1);function s(){const t=document.querySelector(".fireball-hero-game");new a(t)}function r(){const t=document.getElementsByTagName("figure");console.log(t[0].childNodes.length);const e=document.getElementById("sound-button"),i=document.getElementById("audio");"playing"===e.value?(e.value="muted",e.innerHTML="unmute",i.pause()):"muted"===e.value&&(e.value="playing",e.innerHTML="mute",t[0].childNodes.length>3&&i.play())}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("start-button").addEventListener("click",s);document.getElementById("sound-button").addEventListener("click",r);const t=document.getElementById("start-button");t&&(window.setInterval(()=>{t.innerHTML=""},500),window.setInterval(()=>{t.innerHTML="-- Start --"},1e3))})},function(t,e,i){const a=i(2);class s{constructor(t){this.element=t,this.board="",this.gameStarted=!1,this.fireball1="",this.fireball2="",this.fireball3="",this.fireball4="",this.fireballCoordinates=[this.fireball1.id,this.fireball2.id,this.fireball3.id,this.fireball4.id],this.intervals="",this.clear="",this.setupGame=this.setupGame.bind(this),this.handleScore=this.handleScore.bind(this),this.waves=0,this.handleMove=this.handleMove.bind(this),this.isGameOver=this.isGameOver.bind(this),this.updateClasses=this.updateClasses.bind(this),this.createStarCharacter=this.createStarCharacter.bind(this),this.generateFireballs=this.generateFireballs.bind(this),this.animateFireball1=this.animateFireball1.bind(this),this.animateFireball2=this.animateFireball2.bind(this),this.animateFireball3=this.animateFireball3.bind(this),this.animateFireball4=this.animateFireball4.bind(this),this.resetGame=this.resetGame.bind(this),this.removeClasses=this.removeClasses.bind(this),this.removeFireballs=this.removeFireballs.bind(this),this.play=this.play.bind(this),this.stop=this.stop.bind(this),this.pause=this.pause.bind(this),this.audio=document.getElementById("audio"),this.setupGame(),window.addEventListener("keydown",this.handleMove)}setupGame(){this.board=new a,this.intervals="",this.clear="";let t="";for(let e=0;e<this.board.grid.length;e++){t+="<ul>";for(let i=0;i<this.board.grid.length;i++){let a=[e,i],s=e,r=i;t+=3===s&&4===r?`<li id=${a} class="character"><canvas id='canvas-character'></canvas></li>`:3===s&&3===r?`<li id=${a} class="star"><canvas id='canvas-star'></canvas></li>`:`<li id=${a}><canvas></canvas></li>`}t+="</ul>"}this.element.innerHTML=t,this.handleScore(),this.createCanvasStar(),this.createCanvasCharacter()}handleScore(){document.getElementById("game-detail-score").innerHTML="Waves Survived: "+this.waves}createCanvasCharacter(){const t=document.getElementById("canvas-character");t.width=100,t.height=100;const e=t.getContext("2d"),i=new Image;i.onload=()=>{e.drawImage(i,16,16,70,70)},i.src="./images/character.png"}createCanvasStar(){const t=document.getElementById("canvas-star");t.width=100,t.height=100;const e=t.getContext("2d"),i=new Image;i.onload=()=>{e.drawImage(i,20,20,60,60)},i.src="./images/star.png"}createStarCharacter(){let t=[this.board.character.positionX,this.board.character.positionY],e=document.getElementById(t);e.classList.add("star-character"),e.firstElementChild.id="canvas-star-character",this.board.character.star=this.board.star,this.createCanvasStarCharacter(),this.generateFireballs()}createCanvasStarCharacter(){const t=document.getElementById("canvas-star-character");t.width=100,t.height=100;const e=t.getContext("2d"),i=new Image;i.onload=()=>{e.drawImage(i,8,8,90,90)},i.src="./images/star_character.png"}handleMove(t){let e;t.preventDefault,"N"===s.KEYS[t.keyCode]&&(e=this.board.character.positionX-1,e>0&&e<7&&(this.board.character.positionX=e,this.isGameOver()||this.updateClasses())),"S"===s.KEYS[t.keyCode]&&(e=this.board.character.positionX+1,e>0&&e<7&&(this.board.character.positionX=e,this.isGameOver()||this.updateClasses())),"E"===s.KEYS[t.keyCode]&&(e=this.board.character.positionY+1,e>0&&e<7&&(this.board.character.positionY=e,this.isGameOver()||this.updateClasses())),"W"===s.KEYS[t.keyCode]&&(e=this.board.character.positionY-1,e>0&&e<7&&(this.board.character.positionY=e,this.isGameOver()||this.updateClasses()))}updateClasses(){this.removeClasses();let t=[this.board.character.positionX,this.board.character.positionY],e=[this.board.star.positionX,this.board.star.positionY],i=document.getElementById(t),a=document.getElementById(e);JSON.stringify(t)===JSON.stringify(e)&&(this.board.character.star=!0),!1===this.board.character.star?this.updateCharAndStar(i,a):this.createStarCharacter()}updateCharAndStar(t,e){t.classList.add("character"),e.classList.add("star"),t.firstElementChild.id="canvas-character",e.firstElementChild.id="canvas-star",this.createCanvasCharacter(),this.createCanvasStar()}reroll(t){let e=Math.floor(7*Math.random(0))+1;return e===t?this.reroll(t):e}generateFireballs(){this.play();if("muted"===document.getElementById("sound-button").value&&this.pause(),!this.gameStarted){this.gameStarted=!0;let t=Math.floor(7*Math.random())+1,e=Math.floor(7*Math.random())+1,i=Math.floor(7*Math.random())+1,a=Math.floor(7*Math.random())+1,s=[t,e,i,a];for(let t=0;t<s.length;t++)for(let e=0;e<s.length;e++)t!==e&&s[t]===s[e]&&(s[t]=this.reroll(s[t]));t=s[0],e=s[1],i=s[2],a=s[3];let r=[0,t],l=document.getElementById(r).firstElementChild;l.id=r,this.fireball1=l,this.createCanvasFireball(l);let n=[e,0],h=document.getElementById(n).firstElementChild;h.id=n,this.fireball2=h,this.createCanvasFireball(h);let d=[7,i],o=document.getElementById(d).firstElementChild;o.id=d,this.fireball3=o,this.createCanvasFireball(o);let c=[a,7],m=document.getElementById(c).firstElementChild;m.id=c,this.fireball4=m,this.createCanvasFireball(m),this.intervals=window.setInterval(()=>{"7"===this.fireball1.id.split(",")[0]||"7"===this.fireball2.id.split(",")[1]||"0"===this.fireball3.id.split(",")[0]||"0"===this.fireball4.id.split(",")[1]?(document.querySelectorAll("canvas").forEach(t=>{t.id!==this.fireball1.id&&t.id!==this.fireball2.id&&t.id!==this.fireball3.id&&t.id!==this.fireball4.id||(t.id="",t.getContext("2d").clearRect(0,0,100,100))}),this.gameStarted=!1,this.waves=this.waves+1,this.generateFireballs()):(this.handleScore(),this.fireball1&&this.fireball2&&this.fireball3&&this.fireball4&&(this.animateFireball1(),this.animateFireball2(),this.animateFireball3(),this.animateFireball4()))},500),this.clear=window.setInterval(()=>{window.clearInterval(this.intervals)},4e3)}}createCanvasFireball(t){t.width=100,t.height=100;const e=t.getContext("2d"),i=new Image;i.onload=()=>{e.drawImage(i,8,8,80,80)},this.fireball1===t?i.src="./images/top.png":this.fireball2===t?i.src="./images/left.png":this.fireball3===t?i.src="./images/bottom.png":this.fireball4===t&&(i.src="./images/right.png")}animateFireball1(){let t=this.fireball1.id.split(","),e=[parseInt(t[0])+1,parseInt(t[1])],i=document.getElementById(e).firstElementChild;i.id=e,this.fireball1.getContext("2d").clearRect(0,0,100,100),this.fireball1=i,this.isGameOver()||this.createCanvasFireball(i)}animateFireball2(){let t=this.fireball2.id.split(","),e=[parseInt(t[0]),parseInt(t[1])+1],i=document.getElementById(e).firstElementChild;i.id=e,this.fireball2.getContext("2d").clearRect(0,0,100,100),this.fireball2=i,this.isGameOver()||this.createCanvasFireball(i)}animateFireball3(){let t=this.fireball3.id.split(","),e=[parseInt(t[0])-1,parseInt(t[1])],i=document.getElementById(e).firstElementChild;i.id=e,this.fireball3.getContext("2d").clearRect(0,0,100,100),this.fireball3=i,this.isGameOver()||this.createCanvasFireball(i)}animateFireball4(){let t=this.fireball4.id.split(","),e=[parseInt(t[0]),parseInt(t[1])-1],i=document.getElementById(e).firstElementChild;i.id=e,this.fireball4.getContext("2d").clearRect(0,0,100,100),this.fireball4=i,this.isGameOver()||this.createCanvasFireball(i)}isGameOver(){let t=this.board.character.positionX,e=this.board.character.positionY;if(this.fireball1.id!==`${t},${e}`&&this.fireball2.id!==`${t},${e}`&&this.fireball3.id!==`${t},${e}`&&this.fireball4.id!==`${t},${e}`)return!1;this.resetGame(),alert("Game Over!!")}resetGame(){this.waves=0,this.gameStarted=!1,window.clearInterval(this.intervals),window.clearInterval(this.clear),this.stop(),this.removeClasses(),this.removeFireballs(),this.setupGame()}removeClasses(){return document.querySelectorAll("li").forEach(t=>{(t.classList.contains("character")||t.classList.contains("star")||t.classList.contains("star-character"))&&(t.classList.remove("character"),t.classList.remove("star"),t.classList.remove("star-character"))}),document.querySelectorAll("canvas").forEach(t=>{t.id!==this.fireball1.id&&t.id!==this.fireball2.id&&t.id!==this.fireball3.id&&t.id!==this.fireball4.id&&(t.id="",t.getContext("2d").clearRect(0,0,100,100))}),!0}removeFireballs(){return document.querySelectorAll("canvas").forEach(t=>{t.id!==this.fireball1.id&&t.id!==this.fireball2.id&&t.id!==this.fireball3.id&&t.id!==this.fireball4.id||(t.id="",t.getContext("2d").clearRect(0,0,100,100))}),this.fireball1="",this.fireball2="",this.fireball3="",this.fireball4="",!0}play(){this.audio.play()}stop(){this.audio.currentTime=0,this.audio.pause()}pause(){this.audio.pause()}}s.KEYS={37:"W",38:"N",39:"E",40:"S"},t.exports=s},function(t,e,i){const a=i(3),s=i(4);t.exports=class{constructor(){this.grid=new Array(8),this.character=new a,this.star=new s}}},function(t,e){t.exports=class{constructor(){this.shielded=!1,this.shield=null,this.positionX=3,this.positionY=4}}},function(t,e){t.exports=class{constructor(){this.positionX=3,this.positionY=3}}}]);